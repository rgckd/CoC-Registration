User Registration Form – Context & Current Design
1. Purpose

The User Registration Form is a public-facing web form used to collect participant registrations for CoC (Circle of Connection) study groups.

It must:

Support multiple Indian languages

Validate inputs securely

Store data reliably in Google Sheets

Send a confirmation email to the registrant

Be robust against bots and accidental double submissions

2. Technology Stack

Frontend: Static HTML + vanilla JavaScript

Backend: Google Apps Script (Web App – doPost)

Storage: Google Sheet (CustomForm)

Security:

Google reCAPTCHA v3

Honeypot field

Hosting:

HTML hosted on GitHub Pages / Google Sites (iframe-safe)

Backend deployed as Apps Script Web App

3. Data Flow (Authoritative)
User → HTML Form → fetch(FormData) → Apps Script doPost
     → Validation → Google Sheet append → Confirmation Email

4. Supported Languages (Canonical Values)

Canonical encoding (used everywhere):

English
Tamil
Hindi
Kannada
Telugu


⚠️ Display text may be localized, but submitted values are always canonical English names.

5. Form Fields (Contract)
Field	Name attribute	Required	Notes
Email	Email	Yes	HTML + backend validated
Name	Name	Yes	Free text
WhatsApp	WhatsApp	Yes	India-specific regex
Center	Center	Yes	Free text
Language	Language	Yes	Hidden field, controlled by dropdown
English proficiency	English	Conditional	Required only if Language ≠ English
Preferred times	Times	Yes	Checkbox grid, at least one
Coordinator willing	Coordinator	Yes	Yes / No
Honeypot	honey	No	Must be empty
Captcha token	recaptcha	Yes	Added programmatically
6. Preferred Time Slots (Important)

Canonical values stored and used everywhere:

<Day> Day
<Day> Evening


Examples:

Mon Day
Thu Evening
Sun Day


Labels shown to users:

Day (10am – 5pm)

Evening (5pm – 10pm)

Backend treats these as opaque strings.

7. Validation Model (Single Source of Truth)

All business validation lives in the backend.

Rules:

All required fields must be present

WhatsApp must be a valid Indian number

At least one Times value must be selected

If Language !== English, then English === "Yes"

If Language === English, backend forces English proficiency to "Yes"

Frontend validation is UX-only and not authoritative.

8. Critical Frontend Rule (Important)

Never disable inputs before creating FormData

Correct pattern:

const fd = new FormData(form);
submitBtn.disabled = true;


Disabled fields are not included in FormData.

9. Backend Output

Backend returns JSON:

Success:

{ "result": "success" }


Validation failure:

{
  "result": "error",
  "error": "Validation failed",
  "missing": ["Preferred days & times", "Coordinator"]
}


Frontend displays backend messages verbatim.

10. Current State

Registration flow is stable and verified

Data is clean and canonical

No pending bugs

Any future changes must preserve:

Field names

Time slot encoding

Backend authority
